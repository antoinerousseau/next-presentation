<SlidePage>
    
<Cover>

# Next.js

Introduction

</Cover>

---

# Sponsors 🙏

## [La Mêlée](https://www.lamelee.com/)

## [Shotgun](https://pro.shotgun.live/fr)

<SpeakerNotes>

- https://gatsby-prez.netlify.app/4

</SpeakerNotes>

---

# Quoi ? 🤔

<Steps>
<Step>

Gatsby et Next.js sont des ***frameworks React*** <br />
permettant de créer des **applications Web** rapides, <br />
via une *stack* moderne qui fonctionne *« out of the box »*

</Step>
<Step>

→ transpilation (ESNext/TypeScript)

→ qualité du code (Eslint/Prettier)

→ code splitting & minification

→ APIs serverless (cloud functions)

</Step>
</Steps>

---

Mais heu... pourquoi changer ?

---

# Gatsby 🪄

<Steps>
<Step>

## Lacunes passées :

→ régénération complète à chaque changement

→ data store client en GraphQL

→ TypeScript non intégré par défaut

</Step>
<Step>

## Maintenant :

→ Incremental builds 👍

→ GraphQL 👎

→ TypeScript peu intégré 👎

</Step>
</Steps>

---

# Next.js vs Gatsby 💥

<br />

[<img src="/images/trends.png" width="75%" />](https://www.npmtrends.com/gatsby-vs-next)

<SpeakerNotes>

- Plus simple, moderne, TypeScript
- Investissements Vercel

</SpeakerNotes>

---


# Next.js

→ Initialement orienté SSR

→ Développement du statique <br />
  ([automatique](https://nextjs.org/docs/advanced-features/automatic-static-optimization) ou [manuel](https://nextjs.org/docs/advanced-features/static-html-export))

<SpeakerNotes>

- SSR : getInitialProps => getServerSideProps
- Statique : getInitalProps => getStaticProps / getStaticPaths

</SpeakerNotes>

---

# CDN Vercel (ou Netlify)

[statique intelligent](https://nextjs.org/docs/api-reference/edge-runtime)

→ **I**ncremental **S**tatic **R**egeneration <br />
  ([automatique](https://nextjs.org/docs/basic-features/data-fetching/incremental-static-regeneration) ou [manuel](https://nextjs.org/docs/basic-features/data-fetching/incremental-static-regeneration#on-demand-revalidation-beta))

→ [Fallback](https://nextjs.org/docs/api-reference/data-fetching/get-static-paths#fallback-blocking)

<SpeakerNotes>

- SWR cache pour SSR

</SpeakerNotes>

---

# Bonus Vercel 🎁

→ [images](https://nextjs.org/docs/basic-features/image-optimization) (composant React et API)

→ [next.config.js](https://nextjs.org/docs/api-reference/next.config.js/introduction) ou [Middleware](https://nextjs.org/docs/advanced-features/middleware)

<SpeakerNotes>

Use cases Middleware:
- Redirect based on cookies, langs, etc
- Set HTTP headers conditionally (cache etc)

</SpeakerNotes>

---

# Limites

## Statique

→ Même contenu pour tous (pas de section utilisateur)

## SSR

→ Cache (quotas, sécurité)

<SpeakerNotes>

- user section = client-side

</SpeakerNotes>

---

# Coûts 💰

Tier gratuit généreux, mais attention…

→ Bande passange

→ API images = 1 000 sources par mois

---

# SSR + cache vs SSG + ISR

<Steps>

<Step>
😱 🤯
</Step>

<Step>

→ Sur Vercel, peu de différence car serverless

</Step>

<Step>
→ Moins de requêtes si SSG avec <em>revalidate</em> à la demande
</Step>
<Step>
<small>(pareil si durée de cache en SSR = durée du revalidate en SSG/ISR)</small>
</Step>

<Step>

→ Données calculées dynamiquement => SSR + SWR
</Step>

<Step>
→ Données statiques (CMS) => SSG + ISR
</Step>

</Steps>

--- 

# Merci !

🙃

<br />

<br />

<br />

<small>Tu n'as rien compris ? Viens me voir !</small>

<br />

<br />

<small>Trop simple pour toi ? Viens me voir !</small>

</SlidePage>
